<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Tips</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f5;
        }
        .container {
            padding: 20px;
            background-color: #f5f5f5;
            min-height: 100vh;
        }
        .loading-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .back-link {
            color: #007bff;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        /* New styling for the tips grid */
        .tips-grid {
            display: grid;
            gap: 12px;
            /* Responsive grid for different screen sizes */
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        /* Responsive behavior for larger screens */
        @media (min-width: 640px) { /* sm breakpoint */
            .tips-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (min-width: 1024px) { /* lg breakpoint */
            .tips-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        
        .tip-card {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-size: 16px;
            color: #fff; /* White text for contrast */
            cursor: pointer;
            transition-property: transform;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 200ms;
        }
        .tip-card:hover {
            transform: scale(1.03); /* Hover effect to scale up slightly */
        }
        .section {
            margin-top: 25px;
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .subtitle {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        .quote {
            font-style: italic;
            font-size: 17px;
            margin-bottom: 10px;
            color: #444;
            line-height: 24px;
        }
        .author {
            font-size: 15px;
            color: #666;
            text-align: right;
            margin-bottom: 5px;
        }
        .reminder {
            background-color: #e0f7fa;
            border-left: 5px solid #00bcd4;
            padding: 15px;
            margin-top: 25px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .reminder-text {
            font-size: 16px;
            color: #333;
            line-height: 22px;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app-root" class="container">
        <!-- Content will be rendered here by JavaScript -->
    </div>

    <script>
        // Mocking React Native/Expo dependencies for the browser environment
        const router = {
            push: (path) => {
                // In a real app, this would change the URL. Here, we can just navigate.
                console.log(`Navigating to ${path}`);
                window.location.href = path; // Simple navigation for this example
            }
        };

        // Mocking AsyncStorage with localStorage
        const AsyncStorage = {
            getItem: (key) => Promise.resolve(localStorage.getItem(key)),
            setItem: (key, value) => Promise.resolve(localStorage.setItem(key, value)),
        };

        const quotes = [
            { text: "Do not save what is left after spending, but spend what is left after saving.", author: "Warren Buffett" },
            { text: "A budget is telling your money where to go instead of wondering where it went.", author: "Dave Ramsey" },
            { text: "Wealth consists not in having great possessions, but in having few wants.", author: "Epictetus" },
            { text: "Beware of little expenses; a small leak will sink a great ship.", author: "Benjamin Franklin" },
            { text: "Financial freedom is available to those who learn about it and work for it.", author: "Robert Kiyosaki" },
            { text: "It‚Äôs not your salary that makes you rich, it‚Äôs your spending habits.", author: "Charles A. Jaffe" },
            { text: "Money looks better in the bank than on your feet.", author: "Sophia Amoruso" },
            { text: "Save money and money will save you.", author: "Evans Buckman" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "You miss 100% of the shots you don‚Äôt take.", author: "Wayne Gretzky" },
            { text: "Start where you are. Use what you have. Do what you can.", author: "Arthur Ashe" }
        ];

        const tips = [
            "Track Your Spending: Know where every cedi goes. Use budgeting apps or spreadsheets.",
            "Create a Weekly Budget: Plan your allowance. Set aside for food, transport, and savings.",
            "Follow the 50/30/20 Rule: 50% on needs, 30% on wants, 20% savings.",
            "Start Saving Early: Even GHS 2 daily adds up. Set goals and reward progress.",
            "Avoid Unnecessary Debt: Borrow only when necessary. Know the terms.",
            "Make Informed Decisions: Ask before buying: 'Do I need this? Is this the best deal?'",
            "Compare Prices: Avoid overspending by checking vendors.",
            "Build an Emergency Fund: Save weekly for unexpected costs.",
            "Practice Delayed Gratification: Wait on non-essentials to avoid regret.",
            "Review Weekly: Evaluate your spending, saving, and plan for next week."
        ];
        
        // A palette of attractive pastel colors for the tip cards
        const tipColors = [
            "#60A5FA", // Blue-400
            "#F87171", // Red-400
            "#FACC15", // Yellow-400
            "#4ADE80", // Green-400
            "#A78BFA", // Violet-400
            "#FB923C", // Orange-400
            "#E879F9", // Magenta-400
            "#38BDF8"  // Sky-400
        ];

        // Helper function to get ISO week number, ported from the original code
        function getWeekNumber() {
            const date = new Date();
            date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay() || 7));
            const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 4));
            const weekNo = Math.ceil((((date.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);
            return weekNo;
        }

        // State-like object to manage UI data
        const state = {
            quote: quotes[0],
            reminderMessage: '',
            isLoading: true,
        };

        // Renders the UI based on the current state
        function render() {
            const root = document.getElementById('app-root');
            root.innerHTML = ''; // Clear existing content

            if (state.isLoading) {
                root.innerHTML = `
                    <div class="loading-container">
                        <svg class="animate-spin h-12 w-12 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p class="mt-4 text-base text-gray-600">Loading financial tips...</p>
                    </div>
                `;
                return;
            }

            // Main UI content
            root.innerHTML = `
                <div class="financial-screen-content">
                    <p class="back-link" onclick="router.push('/dashboard')">‚Üê Back to Dashboard</p>

                    <h1 class="title">üí° Financial Tips</h1>
                    
                    <!-- Updated section for tips with grid layout -->
                    <div class="tips-grid">
                        ${tips.map((tip, index) => {
                            const color = tipColors[index % tipColors.length];
                            return `<div class="tip-card" style="background-color: ${color};">
                                ${tip}
                            </div>`;
                        }).join('')}
                    </div>

                    <div class="section">
                        <h2 class="subtitle">üìå Weekly Quote</h2>
                        <p class="quote">‚Äú${state.quote.text}‚Äù</p>
                        <p class="author">‚Äì ${state.quote.author}</p>
                    </div>

                    <div class="reminder">
                        <p class="reminder-text">${state.reminderMessage}</p>
                    </div>
                </div>
            `;
        }

        // Main function to fetch data and update UI
        async function fetchFinancialData() {
            state.isLoading = true;
            render();

            try {
                // Set weekly quote based on week number
                const weekIndex = getWeekNumber() % quotes.length;
                state.quote = quotes[weekIndex];

                // Fetch data from localStorage (mocking AsyncStorage)
                const lastBudgetStr = await AsyncStorage.getItem('lastExpenseAmount');
                const lastType = await AsyncStorage.getItem('lastExpenseType');

                const lastBudget = parseFloat(lastBudgetStr || '0');
                const lastBudgetType = lastType || 'none';

                let message = "üßæ You haven‚Äôt set a new savings goal this week. Don‚Äôt forget to plan ahead!";
                if (lastBudgetType === 'goal') {
                    message = `‚úÖ Great job! You‚Äôve set a saving goal of GHS ${lastBudget}. Keep it up!`;
                } else if (lastBudgetType === 'expense' && lastBudget > 100) {
                    message = `‚ö†Ô∏è You spent GHS ${lastBudget}. Balance your budget with a saving goal.`;
                }
                state.reminderMessage = message;
            } catch (error) {
                console.error('Failed to load financial data from localStorage', error);
                state.reminderMessage = 'Error loading financial reminders.';
            } finally {
                state.isLoading = false;
                render();
            }
        }

        // Initial render on page load
        document.addEventListener('DOMContentLoaded', fetchFinancialData);
    </script>
</body>
</html>



