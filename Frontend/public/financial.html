<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="pageTitle">Financial Tips</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f5f5f5;
      }
      .container {
        padding: 20px;
        background-color: #f5f5f5;
        min-height: 100vh;
      }
      .loading-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      .back-link {
        color: #007bff;
        margin-bottom: 15px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        text-decoration: none;
      }
      .back-link:hover {
        text-decoration: underline;
      }
      .title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
        text-align: center;
      }
      .tips-grid {
        display: grid;
        gap: 12px;
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
      @media (min-width: 640px) {
        .tips-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }
      @media (min-width: 1024px) {
        .tips-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }
      .tip-card {
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        font-size: 16px;
        color: #fff;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .tip-card:hover {
        transform: scale(1.03);
      }
      .section {
        margin-top: 25px;
        background-color: #fff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .subtitle {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 10px;
        color: #333;
      }
      .quote {
        font-style: italic;
        font-size: 17px;
        margin-bottom: 10px;
        color: #444;
        line-height: 24px;
      }
      .author {
        font-size: 15px;
        color: #666;
        text-align: right;
        margin-bottom: 5px;
      }
      .reminder {
        background-color: #e0f7fa;
        border-left: 5px solid #00bcd4;
        padding: 15px;
        margin-top: 25px;
        border-radius: 8px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }
      .reminder-text {
        font-size: 16px;
        color: #333;
        line-height: 22px;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div class="absolute top-4 right-4 z-20">
      <select
        id="language-selector"
        class="bg-white border border-gray-300 rounded-lg p-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option value="en">English (GHS)</option>
        <option value="fr">Fran√ßais (EUR)</option>
        <option value="es">Espa√±ol (USD)</option>
        <option value="tr">T√ºrk√ße (TRY)</option>
        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (USD)</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π (USD)</option>
      </select>
    </div>

    <div id="app-root" class="container"></div>

    <script>
      // --- TRANSLATIONS ---
      const translations = {
        en: {
          pageTitle: "Financial Tips",
          backLink: "‚Üê Back to Dashboard",
          mainTitle: "üí° Financial Tips",
          weeklyQuote: "üìå Weekly Quote",
          loadingMessage: "Loading financial tips...",
          reminder_no_goal:
            "üßæ You haven‚Äôt set a new savings goal this week. Don‚Äôt forget to plan ahead!",
          reminder_goal_set: (amount) =>
            `‚úÖ Great job! You‚Äôve set a saving goal of GHS ${amount}. Keep it up!`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è You spent GHS ${amount}. Balance your budget with a saving goal.`,
          reminder_error: "Error loading financial reminders.",
          tips: [
            "Track Your Spending: Know where every cedi goes. Use budgeting apps or spreadsheets.",
            "Create a Weekly Budget: Plan your allowance. Set aside for food, transport, and savings.",
            "Follow the 50/30/20 Rule: 50% on needs, 30% on wants, 20% savings.",
            "Start Saving Early: Even GHS 2 daily adds up. Set goals and reward progress.",
            "Avoid Unnecessary Debt: Borrow only when necessary. Know the terms.",
            "Make Informed Decisions: Ask before buying: 'Do I need this? Is this the best deal?'",
            "Compare Prices: Avoid overspending by checking vendors.",
            "Build an Emergency Fund: Save weekly for unexpected costs.",
            "Practice Delayed Gratification: Wait on non-essentials to avoid regret.",
            "Review Weekly: Evaluate your spending, saving, and plan for next week.",
          ],
          quotes: [
            {
              text: "Do not save what is left after spending, but spend what is left after saving.",
              author: "Warren Buffett",
            },
            {
              text: "A budget is telling your money where to go instead of wondering where it went.",
              author: "Dave Ramsey",
            },
            {
              text: "Wealth consists not in having great possessions, but in having few wants.",
              author: "Epictetus",
            },
          ],
        },
        fr: {
          pageTitle: "Conseils financiers",
          backLink: "‚Üê Retour au tableau de bord",
          mainTitle: "üí° Conseils financiers",
          weeklyQuote: "üìå Citation de la semaine",
          loadingMessage: "Chargement des conseils financiers...",
          reminder_no_goal:
            "üßæ Vous n'avez pas fix√© de nouvel objectif d'√©pargne cette semaine.",
          reminder_goal_set: (amount) =>
            `‚úÖ Bon travail ! Vous avez fix√© un objectif d'√©pargne de ‚Ç¨${(
              amount * 0.083
            ).toFixed(2)}. Continuez comme √ßa !`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è Vous avez d√©pens√© ‚Ç¨${(amount * 0.083).toFixed(
              2
            )}. √âquilibrez votre budget avec un objectif d'√©pargne.`,
          reminder_error: "Erreur lors du chargement des rappels financiers.",
          tips: [
            "Suivez vos d√©penses : sachez o√π va chaque cedi. Utilisez des applications ou des feuilles de calcul.",
            "Cr√©ez un budget hebdomadaire : planifiez votre argent de poche.",
            "Suivez la r√®gle 50/30/20 : 50% pour les besoins, 30% pour les d√©sirs, 20% pour l'√©pargne.",
          ],
          quotes: [
            {
              text: "Ne gardez pas ce qui reste apr√®s avoir d√©pens√©, mais d√©pensez ce qui reste apr√®s avoir √©pargn√©.",
              author: "Warren Buffett",
            },
            {
              text: "Un budget, c'est dire √† votre argent o√π aller.",
              author: "Dave Ramsey",
            },
          ],
        },
        es: {
          pageTitle: "Consejos financieros",
          backLink: "‚Üê Volver al tablero",
          mainTitle: "üí° Consejos financieros",
          weeklyQuote: "üìå Cita semanal",
          loadingMessage: "Cargando consejos financieros...",
          reminder_no_goal:
            "üßæ No has establecido un objetivo de ahorro esta semana.",
          reminder_goal_set: (amount) =>
            `‚úÖ ¬°Buen trabajo! Has establecido un objetivo de ahorro de $${(
              amount * 0.082
            ).toFixed(2)}. ¬°Sigue as√≠!`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è Gastaste $${(amount * 0.082).toFixed(
              2
            )}. Equilibra tu presupuesto con un objetivo de ahorro.`,
          reminder_error: "Error al cargar recordatorios financieros.",
          tips: [
            "Sigue tus gastos: conoce cada cedi gastado.",
            "Crea un presupuesto semanal.",
            "Sigue la regla 50/30/20: 50% necesidades, 30% deseos, 20% ahorro.",
          ],
          quotes: [
            {
              text: "No ahorres lo que queda despu√©s de gastar, sino gasta lo que queda despu√©s de ahorrar.",
              author: "Warren Buffett",
            },
          ],
        },
        tr: {
          pageTitle: "Finansal ƒ∞pu√ßlarƒ±",
          backLink: "‚Üê G√∂stergeler Tablosuna D√∂n",
          mainTitle: "üí° Finansal ƒ∞pu√ßlarƒ±",
          weeklyQuote: "üìå Haftalƒ±k Alƒ±ntƒ±",
          loadingMessage: "Finansal ipu√ßlarƒ± y√ºkleniyor...",
          reminder_no_goal:
            "üßæ Bu hafta yeni bir tasarruf hedefi belirlemediniz.",
          reminder_goal_set: (amount) =>
            `‚úÖ Harika! Tasarruf hedefiniz ‚Ç∫${(amount * 0.77).toFixed(
              2
            )} olarak belirlendi. Devam edin!`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è Harcadƒ±ƒüƒ±nƒ±z miktar ‚Ç∫${(amount * 0.77).toFixed(
              2
            )}. B√ºt√ßenizi dengeleyin.`,
          reminder_error: "Finansal hatƒ±rlatmalar y√ºklenemedi.",
          tips: [
            "Harcamalarƒ±nƒ±zƒ± takip edin.",
            "Haftalƒ±k b√ºt√ße olu≈üturun.",
            "50/30/20 kuralƒ±nƒ± uygulayƒ±n.",
          ],
          quotes: [
            {
              text: "Harcamadan sonra kalanƒ±nƒ± biriktirme, biriktirdikten sonra kalanƒ±nƒ± harca.",
              author: "Warren Buffett",
            },
          ],
        },
        ar: {
          pageTitle: "ŸÜÿµÿßÿ¶ÿ≠ ŸÖÿßŸÑŸäÿ©",
          backLink: "‚Üê ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ",
          mainTitle: "üí° ŸÜÿµÿßÿ¶ÿ≠ ŸÖÿßŸÑŸäÿ©",
          weeklyQuote: "üìå ÿßŸÇÿ™ÿ®ÿßÿ≥ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",
          loadingMessage: "ÿ¨ÿßÿ±Ÿç ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑŸÖÿßŸÑŸäÿ©...",
          reminder_no_goal: "üßæ ŸÑŸÖ ÿ™ÿ≠ÿØÿØ ŸáÿØŸÅ ÿßÿØÿÆÿßÿ± ÿ¨ÿØŸäÿØ Ÿáÿ∞ÿß ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ.",
          reminder_goal_set: (amount) =>
            `‚úÖ ÿπŸÖŸÑ ÿ±ÿßÿ¶ÿπ! ŸÑŸÇÿØ ÿ≠ÿØÿØÿ™ ŸáÿØŸÅ ÿßÿØÿÆÿßÿ± ÿ®ŸÇŸäŸÖÿ© $${(amount * 0.082).toFixed(
              2
            )}. ÿßÿ≥ÿ™ŸÖÿ±!`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è ÿ£ŸÜŸÅŸÇÿ™ $${(amount * 0.082).toFixed(
              2
            )}. Ÿàÿ≤Ÿëÿπ ŸÖŸäÿ≤ÿßŸÜŸäÿ™ŸÉ ŸÖÿπ ŸáÿØŸÅ ÿßÿØÿÆÿßÿ±.`,
          reminder_error: "ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ©.",
          tips: [
            "ÿ™ÿ™ÿ®ÿπ ŸÖÿµÿ±ŸàŸÅÿßÿ™ŸÉ.",
            "ÿ£ŸÜÿ¥ÿ¶ ŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿ£ÿ≥ÿ®ŸàÿπŸäÿ©.",
            "ÿßÿ™ÿ®ÿπ ŸÇÿßÿπÿØÿ© 50/30/20.",
          ],
          quotes: [
            {
              text: "ŸÑÿß ÿ™ÿØÿÆÿ± ŸÖÿß ÿ™ÿ®ŸÇŸâ ÿ®ÿπÿØ ÿßŸÑÿ•ŸÜŸÅÿßŸÇÿå ÿ®ŸÑ ÿ£ŸÜŸÅŸÇ ŸÖÿß ÿ™ÿ®ŸÇŸâ ÿ®ÿπÿØ ÿßŸÑÿßÿØÿÆÿßÿ±.",
              author: "Warren Buffett",
            },
          ],
        },
        ru: {
          pageTitle: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã",
          backLink: "‚Üê –ù–∞–∑–∞–¥ –∫ –ø–∞–Ω–µ–ª–∏",
          mainTitle: "üí° –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã",
          weeklyQuote: "üìå –¶–∏—Ç–∞—Ç–∞ –Ω–µ–¥–µ–ª–∏",
          loadingMessage: "–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–æ–≤–µ—Ç–æ–≤...",
          reminder_no_goal:
            "üßæ –í—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω–æ–≤—É—é —Ü–µ–ª—å —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ.",
          reminder_goal_set: (amount) =>
            `‚úÖ –û—Ç–ª–∏—á–Ω–æ! –í—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Ü–µ–ª—å —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π $${(
              amount * 0.082
            ).toFixed(2)}. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!`,
          reminder_high_expense: (amount) =>
            `‚ö†Ô∏è –í—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ $${(amount * 0.082).toFixed(
              2
            )}. –°–±–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –±—é–¥–∂–µ—Ç —Å —Ü–µ–ª—å—é —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π.`,
          reminder_error: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.",
          tips: [
            "–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã.",
            "–°–æ–∑–¥–∞–π—Ç–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç.",
            "–°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—É 50/30/20.",
          ],
          quotes: [
            {
              text: "–ù–µ –∫–æ–ø–∏—Ç–µ —Ç–æ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –ø–æ—Å–ª–µ —Ä–∞—Å—Ö–æ–¥–æ–≤, –∞ —Ç—Ä–∞—Ç—å—Ç–µ —Ç–æ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –ø–æ—Å–ª–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π.",
              author: "Warren Buffett",
            },
          ],
        },
      };

      const tipColors = [
        "#60A5FA",
        "#F87171",
        "#FACC15",
        "#4ADE80",
        "#A78BFA",
        "#FB923C",
        "#E879F9",
        "#38BDF8",
      ];
      const state = {
        quote: null,
        reminderMessage: "",
        isLoading: true,
        currentLang: "en",
      };

      function translatePage(lang) {
        state.currentLang = lang;
        document.documentElement.lang = lang;
        const t = translations[lang];
        document.title = t.pageTitle;
        render();
      }

      function render() {
        const root = document.getElementById("app-root");
        const t = translations[state.currentLang];
        if (state.isLoading) {
          root.innerHTML = `<div class="loading-container"><svg class="animate-spin h-12 w-12 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="mt-4 text-base text-gray-600">${t.loadingMessage}</p></div>`;
          return;
        }
        root.innerHTML = `
        <a href="/dashboard.html" class="back-link">${t.backLink}</a>
        <h1 class="title">${t.mainTitle}</h1>
        <div class="tips-grid">
            ${t.tips
              .map(
                (tip, i) =>
                  `<div class="tip-card" style="background-color:${
                    tipColors[i % tipColors.length]
                  }">${tip}</div>`
              )
              .join("")}
        </div>
        <div class="section">
            <h2 class="subtitle">${t.weeklyQuote}</h2>
            <p class="quote">‚Äú${state.quote.text}‚Äù</p>
            <p class="author">‚Äì ${state.quote.author}</p>
        </div>
        <div class="reminder"><p class="reminder-text">${
          state.reminderMessage
        }</p></div>
    `;
      }

      function getWeekNumber() {
        const date = new Date();
        date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay() || 7));
        const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 4));
        return Math.ceil(
          ((date.getTime() - yearStart.getTime()) / 86400000 + 1) / 7
        );
      }

      async function fetchFinancialData() {
        state.isLoading = true;
        render();
        const t = translations[state.currentLang];
        try {
          const quotes = t.quotes;
          const weekIndex = getWeekNumber() % quotes.length;
          state.quote = quotes[weekIndex];

          const lastBudgetStr =
            localStorage.getItem("lastExpenseAmount") || "0";
          const lastType = localStorage.getItem("lastExpenseType") || "none";
          const lastBudget = parseFloat(lastBudgetStr);

          if (lastType === "goal")
            state.reminderMessage = t.reminder_goal_set(lastBudget);
          else if (lastType === "expense" && lastBudget > 100)
            state.reminderMessage = t.reminder_high_expense(lastBudget);
          else state.reminderMessage = t.reminder_no_goal;
        } catch (e) {
          console.error(e);
          state.reminderMessage = t.reminder_error;
        } finally {
          state.isLoading = false;
          render();
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const langSelector = document.getElementById("language-selector");
        const userLang = navigator.language.split("-")[0];
        if (translations[userLang]) langSelector.value = userLang;
        langSelector.addEventListener("change", (e) =>
          translatePage(e.target.value)
        );
        translatePage(langSelector.value);
        fetchFinancialData();
      });
    </script>
  </body>
</html>
